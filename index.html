<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ê¸€ë¡œë²Œ ê²½ì œ ìƒí™©íŒ</title>
    <style>
        /* ìµœì´ˆ ì½”ë“œì˜ ê¹”ë”í•œ ìŠ¤íƒ€ì¼ ìœ ì§€ */
        body { background-color: #121212; color: #e0e0e0; font-family: -apple-system, sans-serif; padding: 15px; margin: 0; }
        .header { text-align: center; font-size: 1.1rem; font-weight: bold; margin-bottom: 25px; color: #c5a059; }
        .category { margin-top: 25px; font-size: 0.95rem; color: #ffffff; font-weight: bold; }
        .hr-short { border: 0; border-top: 2px solid #c5a059; width: 30px; margin: 5px 0 10px 0; }
        .item-row { display: flex; justify-content: space-between; align-items: center; padding: 10px 5px; border-bottom: 1px solid #222; }
        .label { font-size: 0.95rem; color: #bbbbbb; } 
        .val-container { text-align: right; }
        .value { font-size: 1rem; font-weight: 600; font-family: 'Roboto Mono', monospace; display: block; }
        .change { font-size: 0.75rem; font-weight: 400; margin-top: 2px; }
        .up { color: #ff4444; } .down { color: #4488ff; }
        .footer { text-align: center; font-size: 0.7rem; color: #555; margin-top: 40px; padding-top: 20px; border-top: 1px solid #222; }
    </style>
</head>
<body>
    <div class="header">ğŸ“Š ê¸€ë¡œë²Œ ê²½ì œ ìƒí™©íŒ</div>

    <div class="category">ì™¸í™˜ / ì½”ì¸</div><hr class="hr-short">
    <div class="item-row">
        <span class="label">ì›/ë‹¬ëŸ¬ í™˜ìœ¨</span>
        <div class="val-container"><span class="value" id="USD/KRW">--</span><div class="change" id="USD/KRW-c"></div></div>
    </div>
    <div class="item-row">
        <span class="label">ì›/ì—” í™˜ìœ¨</span>
        <div class="val-container"><span class="value" id="JPY/KRW">--</span><div class="change" id="JPY/KRW-c"></div></div>
    </div>
    <div class="item-row">
        <span class="label">ë¹„íŠ¸ì½”ì¸($)</span>
        <div class="val-container"><span class="value" id="BTC/USD">--</span><div class="change" id="BTC/USD-c"></div></div>
    </div>

    <div class="category">ì£¼ìš” ì¦ì‹œ ì§€í‘œ</div><hr class="hr-short">
    <div class="item-row">
        <span class="label">S&P 500 (ETF)</span>
        <div class="val-container"><span class="value" id="SPY">--</span><div class="change" id="SPY-c"></div></div>
    </div>
    <div class="item-row">
        <span class="label">ë‚˜ìŠ¤ë‹¥ 100 (ETF)</span>
        <div class="val-container"><span class="value" id="QQQ">--</span><div class="change" id="QQQ-c"></div></div>
    </div>

    <div id="status" style="text-align:center; font-size:0.7rem; color:#444; margin-top:20px;">ì—°ê²° ì‹œë„ ì¤‘...</div>
    <div class="footer">2026 Developed by S.K. Chun</div>

    <script>
        const API_KEY = "7142915ec1dc45caad56dfc9fcf07341";
        const targetSymbols = ["USD/KRW", "JPY/KRW", "BTC/USD", "SPY", "QQQ"];

        async function fetchData() {
            for (let i = 0; i < targetSymbols.symbols; i++) { /* ì•„ë˜ ë¡œì§ìœ¼ë¡œ ëŒ€ì²´ */ }
            
            // ë°ì´í„° ê¼¬ì„ ë°©ì§€ë¥¼ ìœ„í•´ ìˆœì°¨ì  ì‹¤í–‰
            for (let i = 0; i < targetSymbols.length; i++) {
                const symbol = targetSymbols[i];
                try {
                    const response = await fetch(`https://api.twelvedata.com/quote?symbol=${symbol}&apikey=${API_KEY}`);
                    const data = await response.json();

                    if (data.close) {
                        const cur = parseFloat(data.close);
                        const prev = parseFloat(data.previous_close);
                        const diff = cur - prev;
                        const pct = ((diff / prev) * 100).toFixed(2);

                        // ìˆ˜ì¹˜ ì—…ë°ì´íŠ¸
                        const valEl = document.getElementById(symbol);
                        valEl.innerText = (symbol === "JPY/KRW") ? cur.toFixed(3) : cur.toLocaleString(undefined, {minimumFractionDigits: 2});

                        // ë“±ë½ ì—…ë°ì´íŠ¸ (ìµœì´ˆ ë°©ì‹)
                        const changeEl = document.getElementById(symbol + "-c");
                        const sign = diff > 0 ? "â–²" : (diff < 0 ? "â–¼" : "");
                        const cls = diff > 0 ? "up" : "down";
                        changeEl.innerHTML = `<span class="${cls}">${sign} ${Math.abs(diff).toFixed(2)} (${pct}%)</span>`;
                    }
                } catch (e) {
                    console.log(symbol + " ë¡œë“œ ì‹¤íŒ¨");
                }
                // API í•œë„ ì¤€ìˆ˜ë¥¼ ìœ„í•´ 8.5ì´ˆ ê°„ê²© ìœ ì§€
                document.getElementById('status').innerText = `ë°ì´í„° ìˆ˜ì‹  ì¤‘... (${i+1}/${targetSymbols.length})`;
                await new Promise(r => setTimeout(r, 8500));
            }
            document.getElementById('status').innerText = "ì—…ë°ì´íŠ¸ ì™„ë£Œ: " + new Date().toLocaleTimeString();
        }

        window.onload = fetchData;
    </script>
</body>
</html>
